/**
 * super-guacamole - Super Guacamole! It's a script that hides your menu items if they don't fit the menu width.
 * @version v1.1.5
 * @link https://github.com/dkfiresky/super-guacamole#readme
 * @license GPL-3.0+
*/
!function(a,b){function d(b){var c,d,e=this;c={id:"",href:"",title:"&middot;&middot;&middot;",children:{},templates:{},container:null},d=a.extend(c,b),e.id=d.id,e.href=d.href,e.title=d.title,e.children=d.children,e.templates=d.templates,e.$container=d.container,e.node=null,e.attachedNode=null,e.options={},e.visible=!0}var c={menu:'<li class="%1$s"><a href="%2$s">%3$s</a>%4$s</li>',child_wrap:"<ul>%s</ul>",child:'<li class="%1$s" id="%5$s"><a href="%2$s">%3$s</a><ul class="sub-menu">%4$s</ul></li>'};d.prototype.set=function(a){if(!1==a instanceof d)throw new Error("Invalid argument type");return this.children[a.id]=a,this},d.prototype.push=function(a){return this.set(a)},d.prototype.get=function(a){var b=null;return this.map(a,function(a,c){return b=c,c}),b},d.prototype.map=function(a,b,c){var d={id:a},e=this;return"string"!=typeof a&&(d=a),c=c||this.children,0>=c.length?d:(Object.keys(c).forEach(function(a){child=c[a],d.id===child.id?c[d.id]=b(child):child.children&&0<Object.keys(child.children).length&&(d=e.map(d,b,child.children))}),d)},d.prototype.has=function(a){return b!==this.children[a]},d.prototype.isVisible=function(){return this.visible},d.prototype.forEach=function(a){return this.children.forEach(a)},d.prototype.countVisibleAttachedNodes=function(){var b=this,c=-1;return Object.keys(b.children).forEach(function(d){a(b.children[d].getAttachedNode()).attr("hidden")||c++}),c},d.prototype.countVisibleNodes=function(){var d,b=this,c=0;return Object.keys(b.children).forEach(function(e){d=b.children[e],a(d.getNode()).attr("hidden")||c++}),c},d.prototype.countVisible=function(){var a=this,b=0;return Object.keys(a.children).forEach(function(c){a.children[c].isVisible()&&b++}),b},d.prototype.getNode=function(){return this.node},d.prototype.getAttachedNode=function(){return this.attachedNode},d.prototype.setNode=function(a){this.node=a},d.prototype.attachNode=function(a){this.attachedNode=a},d.prototype.setOptions=function(a){return this.options=a,this},d.prototype.getOptions=function(){return this.options},d.prototype.render=function(){function h(a,b,c){var d=a.replace(new RegExp("\\%"+b+"\\$s","g"),c);return pipes={replace:function(a,b){return h(d,a,b),pipes},get:function(){return d}},pipes}function i(a,b,e){var f="",g=Object.keys(b.children);return e=e||!1,g.forEach(function(a){f+=i("super-guacamole__menu__child",b.children[a])}),h(e?d:c,1,a+" menu-item"+(0<g.length?" menu-item-has-children":"")).replace(2,b.href).replace(3,b.title).replace(4,0<g.length?f:"").replace(5,b.id).get().replace('<ul class="sub-menu"></ul>',"")}function j(a){var b="";return Object.keys(a).forEach(function(c){b+=i("super-guacamole__menu",a[c])}),b}var g,b=this,c=b.templates.menu,d=b.templates.child,e=b.$container;b.options.$menu;return 0<e.length&&(e.append(j([b])),e.find(".super-guacamole__menu__child").each(function(){$current_el=a(this),id=a(this).attr("id"),g=a("#"+id.replace("sg-","")),0<g.length&&b.map(id,function(a){return a.attachNode(g),a.setNode($current_el),a})})),this},d.extract=function(b){var e,f,g,h,c={};return b.each(function(b,i){e=a(i),f=e.find("a[href]:first"),g=new d({id:"sg-"+e.attr("id"),href:f.attr("href"),title:f.get(0).childNodes[0].data}),g.attachNode(e),-1<e.children(".sub-menu").length&&(subMenu=d.extract(e.children(".sub-menu").children(".menu-item")),Object.keys(subMenu).forEach(function(a){h=subMenu[a],g.set(h)})),c[g.id]=g}),c},d.prototype.attachedNodesFit=function(){var e,g,b=this,c=0,d=0,h=b.$container.outerWidth(!0)-b.$container.find(".super-guacamole__menu").outerWidth(!0)-(parseInt(a(".header-container > .container").css("padding-left"),10)+parseInt(a(".header-container > .container").css("padding-left"),10))/2;return Object.keys(b.children).forEach(function(c){g=b.children[c],$attachedNode=a(g.getAttachedNode()),e=a(g.getNode()),$attachedNode.removeAttr("hidden"),e.attr("hidden",!0)}),Object.keys(b.children).forEach(function(f){g=g=b.children[f],$attachedNode=a(g.getAttachedNode()),e=a(g.getNode()),d=$attachedNode.outerWidth(!0),0<d&&$attachedNode.data("width",d),c+=$attachedNode.data("width"),c>h&&($attachedNode.attr("hidden",!0),e.removeAttr("hidden"))}),!0},d.prototype.menuFit=function(b){var f,c=this,d={removeAttr:function(a,b){return a.removeAttr(b)},attr:function(a,b){return a.attr(b,!0)}},e="removeAttr",g=c.options.threshold||768;return b=b||!1,0===c.countVisibleNodes()&&(e="attr"),g-1>=a(window).width()&&(Object.keys(c.children).forEach(function(b){f=c.children[b],$attachedNode=a(f.getAttachedNode()),$node=a(f.getNode()),$attachedNode.removeAttr("hidden"),$node.attr("hidden",!0)}),e="attr"),b||d[e](c.$container.find(".super-guacamole__menu"),"hidden"),"removeAttr"===e},d.prototype.watch=function(b){function i(){c.attachedNodesFit(),c.menuFit()}function j(a){var b;return function(d){function e(){i(),timeout=null}b&&clearTimeout(b),b=setTimeout(e,a)}}var c=this;return(b=b||!1)?(i(),c):(a(window).on("resize",j(10)),a(window).on("orientationchange",j(10)),c)},a.fn.superGuacamole=function(b){var e,f,i,j,g=a(this),h=g.find("#main-menu");e={threshold:544,minChildren:3,childrenFilter:"li",menuTitle:"&middot;&middot;&middot;",menuUrl:"#",templates:c},f=a.extend(e,b),i=h.children(f.childrenFilter+":not(.super-guacamole__menu):not(.super-guacamole__menu__child)"),j=new d({title:f.menuTitle,href:f.menuUrl,templates:f.templates,children:d.extract(i),container:h}),f.$menu=h,window.__tm_sg=j,j.setOptions(f).render().watch(!0).watch()}}(jQuery);